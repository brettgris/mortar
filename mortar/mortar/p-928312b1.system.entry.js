var __awaiter=this&&this.__awaiter||function(e,t,i,n){function r(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function l(e){try{a(n.next(e))}catch(t){o(t)}}function s(e){try{a(n["throw"](e))}catch(t){o(t)}}function a(e){e.done?i(e.value):r(e.value).then(l,s)}a((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(e){return function(t){return a([e,t])}}function a(l){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=l[0]&2?r["return"]:l[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;if(r=0,o)l=[l[0]&2,o.value];switch(l[0]){case 0:case 1:o=l;break;case 4:i.label++;return{value:l[1],done:false};case 5:i.label++;r=l[1];l=[0];continue;case 7:l=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(l[0]===6&&i.label<o[1]){i.label=o[1];o=l;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(l);break}if(o[2])i.ops.pop();i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s];r=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:true}}};System.register(["./p-0ef5a3c1.system.js","./p-50f9a219.system.js","./p-23d279a0.system.js"],(function(e){"use strict";var t,i,n,r,o;return{setters:[function(e){t=e.r;i=e.c;n=e.h;r=e.g},function(){},function(e){o=e.c}],execute:function(){var l=e("mortar_dropdown",function(){function e(e){var n=this;t(this,e);this.size="md";this.label="";this.help="";this.haserror=false;this.error="";this.placeholder="";this.disabled=false;this.open=false;this.focused=false;this.highlight=-1;this.value="";this.className=function(){return o("dropdown-outer",""+n.size,{"is-open":n.open===true,"is-focused":n.focused===true,"is-disabled":n.disabled===true,"has-error":n.haserror===true})};this.dropClassName=function(){return o("dropdown-list","dropdown-list-dropdown",{"is-active":n.open===true})};this.displayClassName=function(){return o("dropdown-item","dropdown-item-selectable",{"dropdown-placeholder":!n.value})};this.handleClick=function(){if(!n.disabled){n.open=!n.open}};this.handleFocus=function(){if(!n.disabled){n.focused=true}};this.handleBlur=function(){if(!n.disabled){n.focused=false;n.open=false}};this.handleListClick=function(e){var t=e.target;var i=t.getAttribute("data-value");var r=t.getAttribute("data-disabled");if(r===null){var o=n.options.find((function(e){return e.value===i}));if(o){n.handleItemSelect(o)}}};this.handleItemSelect=function(e){if(e.disabled!==true){var t=n.getCurrent();if(t){t.selected=false}e.selected=true;n.value=e.value;n.itemSelect.emit(e);n.open=false}};this.handleDropdownRef=function(e){n.dropdownEl=e};this.loadOptions=function(){n.options=Array.prototype.slice.call(n.el.querySelectorAll("mortar-dropdown-item"));var e=n.options.find((function(e){return e.selected===true}));if(e){n.value=e.value}};this.getAvailable=function(){return n.options.reduce((function(e,t,i){if(!t.disabled){e.push({o:t,k:i})}return e}),[])};this.getCurrent=function(){if(n.value&&n.options){var e=n.options.find((function(e){return e.value===n.value}));return e||null}else{return null}};this.clearHighlight=function(){var e=n.options[n.highlight];if(e){e.highlighted=false}n.highlight=-1};this.setHighlight=function(e){var t=n.getAvailable();if(e){if(n.highlight===-1){var i=0;if(n.value){var r=t.find((function(e){return e.o.value===n.value}));i=r.k}n.highlight=i;n.options[i].highlighted=true}else{n.options[n.highlight].highlighted=false;var o=t.find((function(e){return e.k>n.highlight}));n.highlight=o?o.k:t[0].k;n.options[n.highlight].highlighted=true}}else{var l=t.reverse();if(n.highlight===-1){var i=0;if(n.value){var r=l.find((function(e){return e.o.value===n.value}));i=r.k}n.highlight=i;n.options[i].highlighted=true}else{n.options[n.highlight].highlighted=false;var o=l.find((function(e){return e.k<n.highlight}));n.highlight=o?o.k:l[0].k;n.options[n.highlight].highlighted=true}}if(n.highlight>-1){n.options[n.highlight].getEl().then((function(e){var t=n.el.querySelector('.dropdown-list[role="listbox"]');t.scrollTop=e.offsetTop}))}};this.selectHighlight=function(){if(n.highlight>-1){n.handleItemSelect(n.options[n.highlight])}};this.itemSelect=i(this,"itemSelect",7)}e.prototype.handleOutsideClick=function(e){if(this.open===true&&!(e.target===this.dropdownEl||this.dropdownEl.contains(e.target))){this.open=false}};e.prototype.componentWillLoad=function(){this.loadOptions()};e.prototype.handleOpen=function(e){var t=this;if(!e){this.clearHighlight()}else{if(this.value){var i=this.getCurrent();if(i){i.getEl().then((function(e){var i=t.el.querySelector('.dropdown-list[role="listbox"]');i.scrollTop=e.offsetTop}))}}}};e.prototype.handleKeySelect=function(e){if(this.open){if(e.keyCode===38){e.preventDefault();this.setHighlight(false)}if(e.keyCode===40){e.preventDefault();this.setHighlight(true)}if(e.keyCode===13||e.keyCode===32){e.preventDefault();this.selectHighlight();this.open=false}if(e.keyCode===27){e.preventDefault();this.open=false}}else if(this.focused){if(e.keyCode===13||e.keyCode===32){e.preventDefault();this.open=true}}};e.prototype.render=function(){var e=this.getCurrent();return n("mortar-form-element",{label:this.label,help:this.help,haserror:this.haserror,error:this.error,elementclass:"dropdown",ref:this.handleDropdownRef},n("div",{class:this.className(),tabindex:"0",role:"listbox","aria-haspopup":"true","aria-expanded":this.open,onFocus:this.handleFocus,onBlur:this.handleBlur},n("div",{class:"dropdown-inner",onClick:this.handleClick},n("div",{class:"dropdown-list dropdown-list-single"},n("div",{class:this.displayClassName(),"aria-selected":"true"},e?e.label:this.placeholder))),n("div",{class:this.dropClassName(),"aria-expanded":this.open},n("div",{class:"dropdown-list",role:"listbox",onClick:this.handleListClick},n("slot",null)))))};Object.defineProperty(e.prototype,"el",{get:function(){return r(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{open:["handleOpen"]}},enumerable:true,configurable:true});return e}());var s=e("mortar_dropdown_item",function(){function e(e){var i=this;t(this,e);this.disabled=false;this.highlighted=false;this.selected=false;this.label="";this.value="";this.className=function(){return o("dropdown-item","dropdown-item-choice",{"dropdown-item-selectable":!i.disabled,"dropdown-item-disabled":i.disabled,"is-highlighted":!i.disabled&&i.highlighted})}}e.prototype.getEl=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.root]}))}))};e.prototype.render=function(){return n("div",{class:this.className(),role:"option","aria-selected":this.selected,"data-value":this.value,"data-disabled":this.disabled},this.label)};Object.defineProperty(e.prototype,"root",{get:function(){return r(this)},enumerable:true,configurable:true});return e}())}}}));