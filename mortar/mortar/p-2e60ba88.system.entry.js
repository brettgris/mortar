System.register(["./p-bf92d080.system.js","./p-50f9a219.system.js","./p-23d279a0.system.js","./p-6c66890c.system.js"],(function(e){"use strict";var t,a,n,r,i,l;return{setters:[function(e){t=e.r;a=e.h;n=e.c;r=e.g},function(){},function(e){i=e.c},function(e){l=e.f}],execute:function(){var s=e("mortar_datepicker_calendar",function(){function e(e){var r=this;t(this,e);this.days=["S","M","T","W","R","F","S"];this.months=["January","February","March","April","May","June","July","August","September","October","November","December"];this.monthPlaceholder="Month";this.yearPlaceholder="Year";this.open=false;this.focused=false;this.highlight=-1;this.header=true;this.embed=false;this.customClass=function(e,t,a){return""};this.getAvailableMonths=function(){return r.months.map((function(e,t){return{label:e,value:t}}))};this.getAvailableYears=function(){var e=new Date;var t=r.minDate||new Date(e.getFullYear()-5,e.getMonth(),e.getDate());var a=r.maxDate||new Date(e.getFullYear()+5,e.getMonth(),e.getDate());var n=t.getFullYear();var i=a.getFullYear();var l=i-n;var s=Array.apply(null,Array(l+1));return s.map((function(e,t){return{value:n+t,label:n+t}}))};this.getMonthValue=function(){var e=r.current||r.selected||r.getDefaultDate();return{value:e.getMonth(),label:r.months[e.getMonth()]}};this.getYearValue=function(){var e=r.current||r.selected||r.getDefaultDate();return{value:e.getFullYear(),label:e.getFullYear()}};this.handleClear=function(){r.current=null;r.selected=null;r.clearDate.emit()};this.changeCurrent=function(e,t,a){if(a===void 0){a=-1}var n=new Date(t,e);if(r.minDate){var i=new Date(r.minDate.getFullYear(),r.minDate.getMonth());if(n<i){n=i}}if(r.maxDate){var l=new Date(r.maxDate.getFullYear(),r.maxDate.getMonth());if(n>l){n=l}}r.current=n;r.highlight=a};this.handleChangeMonth=function(e){var t=r.current||r.selected||r.getDefaultDate();var a=t.getMonth()+e;var n=t.getFullYear();if(a===-1){a=11;n--}if(a===12){a=0;n++}r.changeCurrent(a,n)};this.handleChangeCurrentMonth=function(e){var t=r.current||r.selected||r.getDefaultDate();r.changeCurrent(e.detail.value,t.getFullYear())};this.handleChangeCurrentYear=function(e){var t=r.current||r.selected||r.getDefaultDate();r.changeCurrent(t.getMonth(),e.detail.value)};this.getCurrentMonth=function(){var e=r.current||r.selected||r.getDefaultDate();return r.months[e.getMonth()]+" "+e.getFullYear()};this.getDefaultDate=function(){var e=new Date;if(r.minDate&&e<r.minDate){e=r.minDate}if(r.maxDate&&e>r.maxDate){e=r.maxDate}return e};this.handleClickDay=function(e,t,a){var n=new Date(e,t,a);r.selected=n;r.selectDate.emit(n);r.clickDate.emit(n)};this.handleSelectDay=function(e,t,a,n){var i=new Date(e,t,a);r.selected=i;r.selectDate.emit(i);r.keyboardSelect.emit(n)};this.handleCalendarFocus=function(){r.focused=true};this.handleCalendarBlur=function(){r.focused=false};this.getDaysInMonth=function(e){var t=new Date(e.getFullYear(),e.getMonth()).getDay();var a=40-new Date(e.getFullYear(),e.getMonth(),40).getDate();var n=t+a;var r=6;var i=e.getFullYear();var l=e.getMonth();var s={month:l>0?l-1:11,year:l>0?i:i-1,length:0};s.length=40-new Date(s.year,s.month,40).getDate();var h={month:l<11?l+1:0,year:l<11?i:i+1,length:0};h.length=40-new Date(h.year,h.month,40).getDate();return{first:t,length:a,total:n,rows:r,year:i,month:l,previous:s,next:h}};this.getCalendarDays=function(){var e=r.current||r.selected||r.getDefaultDate();var t=r.getDaysInMonth(e);var n=Array.apply(null,Array(t.rows));var i=0;var l=0;return n.map((function(e,n){var s=Array.apply(null,Array(7));return a("div",{class:"datepicker-content-row"},s.map((function(e,s){if(n===0&&s<t.first){var h=t.previous.length-(t.first-1-s);return a("div",{class:"datepicker-content-item datepicker-content-out "+r.customClass(t.previous.year,t.previous.month,h)},a("div",{class:"datepicker-content-display"},a("span",null,h)))}else if(i<t.length){i++;var o=i;if(r.isAvailable(t.year,t.month,o)){var c=r.customClass(t.year,t.month,o);if(r.isToday(t.year,t.month,o)){c+=" datepicker-today"}if(r.isSelected(t.year,t.month,o)){c+=" datepicker-selected"}if(r.highlight===o&&r.focused){c+=" datepicker-highlight"}return a("div",{class:"datepicker-content-item "+c,onClick:function(){return r.handleClickDay(t.year,t.month,o)}},a("div",{class:"datepicker-content-display"},a("span",null,o)))}else{return a("div",{class:"datepicker-content-item datepicker-content-out "+r.customClass(t.year,t.month,o)},a("div",{class:"datepicker-content-display"},a("span",null,o)))}}else{l++;return a("div",{class:"datepicker-content-item datepicker-content-out "+r.customClass(t.next.year,t.next.month,l)},a("div",{class:"datepicker-content-display"},a("span",null,l)))}})))}))};this.isToday=function(e,t,a){var n=new Date;return e===n.getFullYear()&&t===n.getMonth()&&a===n.getDate()};this.isSelected=function(e,t,a){return r.selected&&e===r.selected.getFullYear()&&t===r.selected.getMonth()&&a===r.selected.getDate()};this.isAvailable=function(e,t,a){var n=new Date(e,t,a);if(r.minDate&&r.maxDate){return n>=r.minDate&&n<=r.maxDate}else if(r.minDate){return n>=r.minDate}else if(r.maxDate){return n<=r.maxDate}else{return true}};this.className=function(){return i("datepicker-list-outer",{show:r.open,"no-header":!r.header&&r.embed,embed:r.embed})};this.clearDate=n(this,"clearDate",7);this.selectDate=n(this,"selectDate",7);this.clickDate=n(this,"clickDate",7);this.keyboardSelect=n(this,"keyboardSelect",7);this.keyboardExit=n(this,"keyboardExit",7)}e.prototype.handleSelected=function(e){if(!e){this.current=null}};e.prototype.handleClose=function(e){if(!e){this.current=null;this.focused=false;l.off(this.root)}else{l.on(this.root);var t=this.root;setTimeout((function(){var e=t.querySelector(".datepicker-body");e.focus()}),1)}};e.prototype.handleFocused=function(){this.highlight=-1};e.prototype.handleKeySelect=function(e){if(this.open&&this.focused){switch(e.keyCode){case 37:this.changeHighlight(-1);e.preventDefault();break;case 38:this.changeHighlight(-7);e.preventDefault();break;case 39:this.changeHighlight(1);e.preventDefault();break;case 40:this.changeHighlight(7);e.preventDefault();break;case 13:this.selectHighlight(e);e.preventDefault();break;case 32:this.selectHighlight(e);e.preventDefault();break}}if(this.open&&e.keyCode===27){var t=Array.prototype.slice.call(this.root.querySelectorAll("mortar-dropdown"));var a=t.find((function(e){var t=e.querySelector(".dropdown-outer");return t===document.activeElement}));if((!a||!a.open)&&!this.embed){this.open=false;this.keyboardExit.emit()}}};e.prototype.changeHighlight=function(e){var t=this.current||this.selected||this.getDefaultDate();var a=this.getDaysInMonth(t);if(this.highlight===-1){var n=new Date;if(this.selected&&this.selected.getMonth()===a.month&&this.selected.getFullYear()===a.year){this.highlight=this.selected.getDate()}else if(n.getMonth()===a.month&&n.getFullYear()===a.year){this.highlight=n.getDate()}else{this.highlight=Math.floor(a.length/2)}}this.highlight+=e;if(this.highlight<=0){this.changeCurrent(a.previous.month,a.previous.year,a.previous.length+this.highlight)}else if(this.highlight>a.length){this.changeCurrent(a.next.month,a.next.year,this.highlight-a.length)}};e.prototype.selectHighlight=function(e){if(this.highlight>=0){var t=this.current||this.selected||this.getDefaultDate();this.handleSelectDay(t.getFullYear(),t.getMonth(),this.highlight,e)}};e.prototype.render=function(){if(this.embed){return a("fieldset",{class:"datepicker"},this.renderEl())}else{return this.renderEl()}};e.prototype.renderEl=function(){var e=this;return a("div",{class:this.className()},this.header&&a("div",{class:"datepicker-selector"},a("div",{class:"datepicker-select-dropdown"},a("mortar-dropdown",{options:this.getAvailableMonths(),placeholder:this.monthPlaceholder,value:this.getMonthValue(),onItemSelect:this.handleChangeCurrentMonth})),a("div",{class:"datepicker-select-dropdown"},a("mortar-dropdown",{options:this.getAvailableYears(),placeholder:this.yearPlaceholder,value:this.getYearValue(),onItemSelect:this.handleChangeCurrentYear})),a("div",{class:"datepicker-select-clear"},a("button",{onClick:this.handleClear},a("mortar-icon",{kind:"close",arialabel:"close"})))),a("div",{class:"datepicker-header"},a("div",{class:"datepicker-header-previous"},a("button",{onClick:function(){return e.handleChangeMonth(-1)}},a("mortar-icon",{kind:"back",arialabel:"Previous Month"}))),a("div",{class:"datepicker-header-display"},a("span",null,this.getCurrentMonth())),a("div",{class:"datepicker-header-next"},a("button",{onClick:function(){return e.handleChangeMonth(1)}},a("mortar-icon",{kind:"next",arialabel:"Next Month"})))),a("div",{class:"datepicker-body",tabindex:"0",onFocus:this.handleCalendarFocus,onBlur:this.handleCalendarBlur},a("div",{class:"datepicker-days"},this.days.map((function(e){return a("div",{class:"datepicker-day"},a("div",{class:"datepicker-day-display"},a("span",null,e)))}))),a("div",{class:"datepicker-content"},this.getCalendarDays())))};Object.defineProperty(e.prototype,"root",{get:function(){return r(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{selected:["handleSelected"],open:["handleClose"],focused:["handleFocused"]}},enumerable:true,configurable:true});return e}())}}}));