System.register(["./p-0ef5a3c1.system.js","./p-50f9a219.system.js","./p-23d279a0.system.js","./p-6c66890c.system.js"],(function(e){"use strict";var t,a,r,n,i,l;return{setters:[function(e){t=e.r;a=e.h;r=e.c;n=e.g},function(){},function(e){i=e.c},function(e){l=e.f}],execute:function(){var s=e("mortar_datepicker_calendar",function(){function e(e){var n=this;t(this,e);this.days=["S","M","T","W","R","F","S"];this.months=["January","February","March","April","May","June","July","August","September","October","November","December"];this.monthPlaceholder="Month";this.yearPlaceholder="Year";this.open=false;this.focused=false;this.highlight=-1;this.header=true;this.embed=false;this.customClass=function(e,t,a){return""};this.getAvailableMonths=function(){return n.months.map((function(e,t){return a("mortar-dropdown-item",{value:""+t,label:e})}))};this.getAvailableYears=function(){var e=new Date;var t=n.minDate||new Date(e.getFullYear()-5,e.getMonth(),e.getDate());var r=n.maxDate||new Date(e.getFullYear()+5,e.getMonth(),e.getDate());var i=t.getFullYear();var l=r.getFullYear();var s=l-i;var h=Array.apply(null,Array(s+1));return h.map((function(e,t){var r=""+(i+t);return a("mortar-dropdown-item",{value:r,label:r})}))};this.getMonthValue=function(){var e=n.current||n.selected||n.getDefaultDate();return""+e.getMonth()};this.getYearValue=function(){var e=n.current||n.selected||n.getDefaultDate();return""+e.getFullYear()};this.handleClear=function(){n.current=null;n.selected=null;n.clearDate.emit()};this.changeCurrent=function(e,t,a){if(a===void 0){a=-1}var r=new Date(t,e);if(n.minDate){var i=new Date(n.minDate.getFullYear(),n.minDate.getMonth());if(r<i){r=i}}if(n.maxDate){var l=new Date(n.maxDate.getFullYear(),n.maxDate.getMonth());if(r>l){r=l}}n.current=r;n.highlight=a};this.handleChangeMonth=function(e){var t=n.current||n.selected||n.getDefaultDate();var a=t.getMonth()+e;var r=t.getFullYear();if(a===-1){a=11;r--}if(a===12){a=0;r++}n.changeCurrent(a,r)};this.handleChangeCurrentMonth=function(e){var t=n.current||n.selected||n.getDefaultDate();n.changeCurrent(e.detail.value,t.getFullYear())};this.handleChangeCurrentYear=function(e){var t=n.current||n.selected||n.getDefaultDate();n.changeCurrent(t.getMonth(),e.detail.value)};this.getCurrentMonth=function(){var e=n.current||n.selected||n.getDefaultDate();return n.months[e.getMonth()]+" "+e.getFullYear()};this.getDefaultDate=function(){var e=new Date;if(n.minDate&&e<n.minDate){e=n.minDate}if(n.maxDate&&e>n.maxDate){e=n.maxDate}return e};this.handleClickDay=function(e,t,a){var r=new Date(e,t,a);n.selected=r;n.selectDate.emit(r);n.clickDate.emit(r)};this.handleSelectDay=function(e,t,a,r){var i=new Date(e,t,a);n.selected=i;n.selectDate.emit(i);n.keyboardSelect.emit(r)};this.handleCalendarFocus=function(){n.focused=true};this.handleCalendarBlur=function(){n.focused=false};this.getDaysInMonth=function(e){var t=new Date(e.getFullYear(),e.getMonth()).getDay();var a=40-new Date(e.getFullYear(),e.getMonth(),40).getDate();var r=t+a;var n=6;var i=e.getFullYear();var l=e.getMonth();var s={month:l>0?l-1:11,year:l>0?i:i-1,length:0};s.length=40-new Date(s.year,s.month,40).getDate();var h={month:l<11?l+1:0,year:l<11?i:i+1,length:0};h.length=40-new Date(h.year,h.month,40).getDate();return{first:t,length:a,total:r,rows:n,year:i,month:l,previous:s,next:h}};this.getCalendarDays=function(){var e=n.current||n.selected||n.getDefaultDate();var t=n.getDaysInMonth(e);var r=Array.apply(null,Array(t.rows));var i=0;var l=0;return r.map((function(e,r){var s=Array.apply(null,Array(7));return a("div",{class:"datepicker-content-row"},s.map((function(e,s){if(r===0&&s<t.first){var h=t.previous.length-(t.first-1-s);return a("div",{class:"datepicker-content-item datepicker-content-out "+n.customClass(t.previous.year,t.previous.month,h)},a("div",{class:"datepicker-content-display"},a("span",null,h)))}else if(i<t.length){i++;var o=i;if(n.isAvailable(t.year,t.month,o)){var c=n.customClass(t.year,t.month,o);if(n.isToday(t.year,t.month,o)){c+=" datepicker-today"}if(n.isSelected(t.year,t.month,o)){c+=" datepicker-selected"}if(n.highlight===o&&n.focused){c+=" datepicker-highlight"}return a("div",{class:"datepicker-content-item "+c,onClick:function(){return n.handleClickDay(t.year,t.month,o)}},a("div",{class:"datepicker-content-display"},a("span",null,o)))}else{return a("div",{class:"datepicker-content-item datepicker-content-out "+n.customClass(t.year,t.month,o)},a("div",{class:"datepicker-content-display"},a("span",null,o)))}}else{l++;return a("div",{class:"datepicker-content-item datepicker-content-out "+n.customClass(t.next.year,t.next.month,l)},a("div",{class:"datepicker-content-display"},a("span",null,l)))}})))}))};this.isToday=function(e,t,a){var r=new Date;return e===r.getFullYear()&&t===r.getMonth()&&a===r.getDate()};this.isSelected=function(e,t,a){return n.selected&&e===n.selected.getFullYear()&&t===n.selected.getMonth()&&a===n.selected.getDate()};this.isAvailable=function(e,t,a){var r=new Date(e,t,a);if(n.minDate&&n.maxDate){return r>=n.minDate&&r<=n.maxDate}else if(n.minDate){return r>=n.minDate}else if(n.maxDate){return r<=n.maxDate}else{return true}};this.className=function(){return i("datepicker-list-outer",{show:n.open,"no-header":!n.header&&n.embed,embed:n.embed})};this.clearDate=r(this,"clearDate",7);this.selectDate=r(this,"selectDate",7);this.clickDate=r(this,"clickDate",7);this.keyboardSelect=r(this,"keyboardSelect",7);this.keyboardExit=r(this,"keyboardExit",7)}e.prototype.handleSelected=function(e){if(!e){this.current=null}};e.prototype.handleClose=function(e){if(!e){this.current=null;this.focused=false;l.off(this.root)}else{l.on(this.root);var t=this.root;console.log("here",this.root,l);setTimeout((function(){var e=t.querySelector(".datepicker-body");e.focus()}),1)}};e.prototype.handleFocused=function(){this.highlight=-1};e.prototype.handleKeySelect=function(e){if(this.open&&this.focused){switch(e.keyCode){case 37:this.changeHighlight(-1);e.preventDefault();break;case 38:this.changeHighlight(-7);e.preventDefault();break;case 39:this.changeHighlight(1);e.preventDefault();break;case 40:this.changeHighlight(7);e.preventDefault();break;case 13:this.selectHighlight(e);e.preventDefault();break;case 32:this.selectHighlight(e);e.preventDefault();break}}if(this.open&&e.keyCode===27){var t=Array.prototype.slice.call(this.root.querySelectorAll("mortar-dropdown"));var a=t.find((function(e){var t=e.querySelector(".dropdown-outer");return t===document.activeElement}));if((!a||!a.open)&&!this.embed){this.open=false;this.keyboardExit.emit()}}};e.prototype.changeHighlight=function(e){var t=this.current||this.selected||this.getDefaultDate();var a=this.getDaysInMonth(t);if(this.highlight===-1){var r=new Date;if(this.selected&&this.selected.getMonth()===a.month&&this.selected.getFullYear()===a.year){this.highlight=this.selected.getDate()}else if(r.getMonth()===a.month&&r.getFullYear()===a.year){this.highlight=r.getDate()}else{this.highlight=Math.floor(a.length/2)}}this.highlight+=e;if(this.highlight<=0){this.changeCurrent(a.previous.month,a.previous.year,a.previous.length+this.highlight)}else if(this.highlight>a.length){this.changeCurrent(a.next.month,a.next.year,this.highlight-a.length)}};e.prototype.selectHighlight=function(e){if(this.highlight>=0){var t=this.current||this.selected||this.getDefaultDate();this.handleSelectDay(t.getFullYear(),t.getMonth(),this.highlight,e)}};e.prototype.render=function(){if(this.embed){return a("fieldset",{class:"datepicker"},this.renderEl())}else{return this.renderEl()}};e.prototype.renderEl=function(){var e=this;return a("div",{class:this.className()},this.header&&a("div",{class:"datepicker-selector"},a("div",{class:"datepicker-select-dropdown"},a("mortar-dropdown",{value:this.getMonthValue(),placeholder:this.monthPlaceholder,onItemSelect:this.handleChangeCurrentMonth},this.getAvailableMonths())),a("div",{class:"datepicker-select-dropdown"},a("mortar-dropdown",{value:this.getYearValue(),placeholder:this.yearPlaceholder,onItemSelect:this.handleChangeCurrentYear},this.getAvailableYears())),a("div",{class:"datepicker-select-clear"},a("button",{onClick:this.handleClear},a("mortar-icon",{kind:"close",arialabel:"close"})))),a("div",{class:"datepicker-header"},a("div",{class:"datepicker-header-previous"},a("button",{onClick:function(){return e.handleChangeMonth(-1)}},a("mortar-icon",{kind:"back",arialabel:"Previous Month"}))),a("div",{class:"datepicker-header-display"},a("span",null,this.getCurrentMonth())),a("div",{class:"datepicker-header-next"},a("button",{onClick:function(){return e.handleChangeMonth(1)}},a("mortar-icon",{kind:"next",arialabel:"Next Month"})))),a("div",{class:"datepicker-body",tabindex:"0",onFocus:this.handleCalendarFocus,onBlur:this.handleCalendarBlur},a("div",{class:"datepicker-days"},this.days.map((function(e){return a("div",{class:"datepicker-day"},a("div",{class:"datepicker-day-display"},a("span",null,e)))}))),a("div",{class:"datepicker-content"},this.getCalendarDays())))};Object.defineProperty(e.prototype,"root",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{selected:["handleSelected"],open:["handleClose"],focused:["handleFocused"]}},enumerable:true,configurable:true});return e}())}}}));