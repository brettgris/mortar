System.register(["./p-bf92d080.system.js","./p-50f9a219.system.js","./p-23d279a0.system.js"],(function(e){"use strict";var t,i,s,l,o;return{setters:[function(e){t=e.r;i=e.c;s=e.h;l=e.g},function(){},function(e){o=e.c}],execute:function(){var n=e("mortar_dropdown",function(){function e(e){var s=this;t(this,e);this.size="md";this.label="";this.help="";this.haserror=false;this.error="";this.placeholder="";this.disabled=false;this.open=false;this.focused=false;this.highlight=-1;this.value=null;this.options=[];this.optionsKeys={value:"value",label:"label",disabled:"disabled"};this.className=function(){return o("dropdown-outer",""+s.size,{"is-open":s.open,"is-focused":s.focused,"is-disabled":s.disabled,"has-error":s.haserror})};this.dropClassName=function(){return o("dropdown-list","dropdown-list-dropdown",{"is-active":s.open})};this.displayClassName=function(){return o("dropdown-item","dropdown-item-selectable",{"dropdown-placeholder":!s.value})};this.handleClick=function(){if(!s.disabled){s.open=!s.open}};this.handleFocus=function(){if(!s.disabled){s.focused=true}};this.handleBlur=function(){if(!s.disabled){s.focused=false;s.open=false}};this.handleItemSelect=function(e){if(!e[s.optionsKeys["disabled"]]){s.value=e;s.itemSelect.emit(e);s.open=false}};this.handleDropdownRef=function(e){s.dropdownEl=e};this.loadOptions=function(){var e=Array.prototype.slice.call(s.el.querySelectorAll("option"));e.forEach((function(e){var t=e.innerHTML;var i=e.getAttribute("value");var l=e.getAttribute("disabled");var o=e.getAttribute("selected");var n={};n[s.optionsKeys["label"]]=t||i||"";n[s.optionsKeys["value"]]=i||t||"";n[s.optionsKeys["disabled"]]=l!==null;s.options.push(n);if(o!==null&&l===null){s.value=n}s.el.removeChild(e)}))};this.getAvailable=function(){var e=s.options.map((function(e,t){return{o:e,k:t}}));return e.filter((function(e){return!e.o[s.optionsKeys["disabled"]]}))};this.clearHighlight=function(){s.highlight=-1};this.setHighlight=function(e){var t=s.getAvailable();if(e){if(s.highlight===-1){if(s.value){var i=t.find((function(e){return s.value[s.optionsKeys["value"]]===e.o[s.optionsKeys["value"]]}));s.highlight=i?i.k:t[0].k}else{s.highlight=t[0].k}}else{var l=t.find((function(e){return e.k>s.highlight}));s.highlight=l?l.k:-1}}else{var o=t.reverse();if(s.highlight===-1){if(s.value){var i=o.find((function(e){return s.value[s.optionsKeys["value"]]===e.o[s.optionsKeys["value"]]}));s.highlight=i?i.k:o[0].k}else{s.highlight=o[0].k}}else{var n=o.find((function(e){return e.k<s.highlight}));s.highlight=n?n.k:-1}}if(s.highlight>=0){var r=s.el.querySelector('.dropdown-list[role="listbox"]');var h=s.el.querySelector("mortar-dropdown-item:nth-child("+(s.highlight+1)+")");r.scrollTop=h.offsetTop}};this.selectHighlight=function(){if(s.highlight>-1){s.handleItemSelect(s.options[s.highlight])}};this.itemSelect=i(this,"itemSelect",7)}e.prototype.handleOutsideClick=function(e){if(this.open&&!(e.target===this.dropdownEl||this.dropdownEl.contains(e.target))){this.open=false}};e.prototype.componentWillLoad=function(){this.loadOptions()};e.prototype.handleOpen=function(e){var t=this;if(!e){this.clearHighlight()}else{if(this.value){var i=this.options.findIndex((function(e){return e.value===t.value.value&&e.label===t.value.label}));if(i>=0){var s=this.el.querySelector('.dropdown-list[role="listbox"]');var l=this.el.querySelector("mortar-dropdown-item:nth-child("+(i+1)+")");s.scrollTop=l.offsetTop}}}};e.prototype.handleKeySelect=function(e){if(this.open){if(e.keyCode===38){e.preventDefault();this.setHighlight(false)}if(e.keyCode===40){e.preventDefault();this.setHighlight(true)}if(e.keyCode===13||e.keyCode===32){e.preventDefault();this.selectHighlight();this.open=false}if(e.keyCode===27){e.preventDefault();this.open=false}}else if(this.focused){if(e.keyCode===13||e.keyCode===32){e.preventDefault();this.open=true}}};e.prototype.render=function(){var e=this;return s("mortar-form-element",{label:this.label,help:this.help,haserror:this.haserror,error:this.error,elementclass:"dropdown",ref:this.handleDropdownRef},s("div",{class:this.className(),tabindex:"0",role:"listbox","aria-haspopup":"true","aria-expanded":this.open,onFocus:this.handleFocus,onBlur:this.handleBlur},s("div",{class:"dropdown-inner",onClick:this.handleClick},s("div",{class:"dropdown-list dropdown-list-single"},s("div",{class:this.displayClassName(),"aria-selected":"true"},this.value?this.value[this.optionsKeys["label"]]:this.placeholder))),s("div",{class:this.dropClassName(),"aria-expanded":this.open},s("div",{class:"dropdown-list",role:"listbox"},this.options.map((function(t,i){return s("mortar-dropdown-item",{highlighted:e.highlight===i,selected:e.highlight>-1?e.highlight===i:e.value&&e.value.value===t.value,disabled:t[e.optionsKeys["disabled"]],label:t[e.optionsKeys["label"]],onClick:function(){return e.handleItemSelect(t)}})}))))))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{open:["handleOpen"]}},enumerable:true,configurable:true});return e}());var r=e("mortar_dropdown_item",function(){function e(e){var i=this;t(this,e);this.disabled=false;this.highlighted=false;this.selected=false;this.label="";this.className=function(){return o("dropdown-item","dropdown-item-choice",{"dropdown-item-selectable":!i.disabled,"dropdown-item-disabled":i.disabled,"is-highlighted":!i.disabled&&i.highlighted})}}e.prototype.render=function(){return s("div",{class:this.className(),role:"option","aria-selected":this.selected},this.label)};return e}());var h=e("mortar_form_element",function(){function e(e){t(this,e);this.elementclass="";this.label="";this.haserror=false;this.error="";this.help="";this.legend="";this.disabled=false;this.legendId="";this.name=""}e.prototype.render=function(){return s("fieldset",{class:this.elementclass,disabled:this.disabled},this.label&&s("label",{htmlFor:this.name},this.label),this.legend&&s("legend",{id:this.legendId},this.legend),s("slot",null),this.help&&s("div",{class:"helper-message show"},this.help),this.haserror&&s("div",{class:"error-message show",role:"alert"},this.error))};return e}())}}}));