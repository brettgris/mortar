import{r as t,c as s,h as i}from"./p-77e8c3a9.js";const e=class{constructor(i){t(this,i),this.label="",this.error="",this.haserror=!1,this.open=!1,this.min=new Date(1900,0,1),this.max=new Date(2100,11,31),this.dateToString=t=>{if(!t)return"";const s=t.getMonth()+1,i=s>=10?s:"0"+s,e=t.getDate();return`${i}/${e>=10?e:"0"+e}/${t.getFullYear()}`},this.valueString="",this.mask="Date",this.required=!0,this.disabled=!1,this.placeholder="mm/dd/yyyy",this.name="",this.header=!0,this.handleOpen=()=>{this.open=!this.open},this.handleSelect=t=>{this.value=t.detail,this.selectDate.emit(t.detail)},this.handleClear=()=>{this.value=null,this.open=!1,this.clearDate.emit(),this.setToggleFocus()},this.handleCalendarRef=t=>{this.calendarElement=t},this.handleToggleRef=t=>{this.toggleElement=t},this.handleClickDate=()=>{this.open=!1},this.handleKeyboardSelect=()=>{this.open=!1,this.setToggleFocus()},this.handleKeyboardExit=()=>{this.open=!1,this.setToggleFocus()},this.setToggleFocus=()=>{const t=this.toggleElement;setTimeout((function(){t.focus()}),10)},this.handleBlur=t=>{const s=this.valueString;this.valueString=t.detail,setTimeout(()=>{this.updateValueFromInput(t.detail,s)},10)},this.updateValueFromInput=(t,s)=>{if(t){const i=t.split("/").map(t=>t?Number(t)?t:Number(t.slice(1))?t.slice(1):Number(t.slice(0,-1))?t.slice(0,-1):t:t).join("/"),e=new Date(i);e.getTime()&&e>this.min&&e<this.max?(this.valueString=this.dateToString(e),this.value=e,this.selectDate.emit(e)):this.valueString=s}},this.selectDate=s(this,"selectDate",7),this.clearDate=s(this,"clearDate",7),this.inputChange=s(this,"inputChange",7),this.dateOutOfRange=s(this,"dateOutOfRange",7)}handleOutsideClick(t){this.open&&(t.target===this.toggleElement||this.toggleElement.contains(t.target)||t.target===this.calendarElement||this.calendarElement.contains(t.target)||(this.open=!1))}componentWillLoad(){this.value&&(this.valueString=this.dateToString(this.value))}handleValue(t){this.valueString=this.dateToString(t)}render(){return i("mortar-form-element",{label:this.label,haserror:this.haserror,error:this.error,elementclass:"datepicker",name:this.name},i("div",{class:"datepicker-outer"},i("div",{class:"datepicker-inner"},i("masked-input",{placeholder:this.placeholder,value:this.valueString,elementclass:"datepicker-input",type:this.mask,onMaskedBlur:this.handleBlur,pattern:"[0-9]*",inputmode:"numeric",name:this.name}),i("button",{class:"datepicker-toggle",onClick:this.handleOpen,ref:this.handleToggleRef},i("mortar-icon",{kind:"calendar"}))),i("mortar-datepicker-calendar",{ref:this.handleCalendarRef,minDate:this.min,maxDate:this.max,onSelectDate:this.handleSelect,onClearDate:this.handleClear,onClickDate:this.handleClickDate,onKeyboardSelect:this.handleKeyboardSelect,onKeyboardExit:this.handleKeyboardExit,selected:this.value,open:this.open,header:this.header})))}static get watchers(){return{value:["handleValue"]}}};export{e as mortar_datepicker}